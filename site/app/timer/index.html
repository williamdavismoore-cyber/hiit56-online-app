<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Timer Player — Member — HIIT56</title>
  <link rel="icon" href="/assets/branding/Hiit56_Favicon_32x32.webp">
  <link rel="apple-touch-icon" href="/assets/branding/Hiit56_Favicon_180x180.webp">

  <meta name="theme-color" content="#000000">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body data-page="member-timer">
  <div class="header">
    <div class="header-inner">
      <a class="logo" href="/">
        <img src="/assets/branding/Hiit56 Online Primary Logo_For Dark Background.png" alt="NDYRA">
      </a>
      <div class="nav">
      <a href="/app/workouts/">Library</a>
      <a href="/app/timer/" class="primary">Timer</a>
      <a href="/workouts/" title="Public workout previews">Public preview</a>
      <a href="/biz/" title="Staff/Admin only">Business</a>
      <a href="/auth/login.html" title="Switch role">Role</a>
      <span class="badge" data-role-pill>Guest</span>
      <span class="badge" data-tenant-pill style="display:none"></span>
    </div>
    </div>
  </div>

  <div class="container">
    <div class="section-title">
      <h2>HIIT56 Timer Player (Prototype)</h2>
      <div class="small">Engineered timing + beeps + time cap (includes transitions)</div>
    </div>

    <div class="banner" data-taxonomy-banner>
      <strong>Prototype note</strong>
      This is a prototype timer page for QA. Move videos are placeholders from the move demo library until the full Move Library + Template Builder is wired.
    </div>

    <div class="timer-config card">
      <div class="meta" style="padding:16px">
        <div class="title">Setup</div>
        <p class="small">Choose a demo (or a saved workout), optionally apply a time cap, set beep volume, then tap Start (required to enable audio on mobile).</p>
          <div class="row" style="margin-top:8px">
            <button class="btn btn-small btn-ghost" data-open-builder>Workout Builder</button>
            <button class="btn btn-small btn-ghost" data-open-myworkouts>My Workouts</button>
          </div>

        <div class="form-grid">
          <label>
            <div class="small">Demo</div>
            <select data-demo-select></select>
          </label>

          <label>
            <div class="small">Time cap (minutes)</div>
            <input type="number" min="1" step="1" value="42" data-cap-min>
          </label>

          <label>
            <div class="small">Cap adjustment pool</div>
            <select data-cap-pool>
              <option value="work">Adjust Work</option>
              <option value="rest">Adjust Rest</option>
              <option value="transitions">Adjust Transitions</option>
              <option value="all" selected>Adjust All</option>
            </select>
          </label>
            <label>
              <div class="small">If under cap</div>
              <select data-cap-under>
                <option value="adjust">Spread time into selected pool</option>
                <option value="finisher" selected>Add finisher block</option>
              </select>
            
            <div class="divider" style="grid-column:1/-1;margin:6px 0"></div>

            <div style="grid-column:1/-1">
              <div class="small"><strong>Cap-filler block</strong> (used when “If under cap” = Add finisher block)</div>
              <div class="small" style="opacity:.8">Pick random moves by muscle group(s), or leave All moves for general random.</div>

              <div class="row" style="flex-wrap:wrap;gap:12px;margin-top:10px" data-cap-filler>
                <label class="small"><input type="checkbox" data-capfill-all checked> All moves</label>
                <label class="small"><input type="checkbox" data-capfill-group value="upper"> Upper Body</label>
                <label class="small"><input type="checkbox" data-capfill-group value="lower"> Lower Body</label>
                <label class="small"><input type="checkbox" data-capfill-group value="total"> Total Body</label>
                <label class="small"><input type="checkbox" data-capfill-group value="cardio"> Cardio</label>
                <label class="small"><input type="checkbox" data-capfill-group value="abs"> Abs/Core</label>
              </div>

              <div class="row" style="flex-wrap:wrap;gap:16px;margin-top:8px">
                <label class="small"><input type="checkbox" data-capfill-balance checked> Balance selected groups</label>
                <label class="small"><input type="checkbox" data-capfill-strict> Require ALL selected groups</label>
                <label class="small"><input type="checkbox" data-capfill-norepeat checked> No repeats</label>
              </div>
            </div>

            <label>
              <div class="small">Cap-filler move length (sec)</div>
              <input type="number" min="10" max="180" value="30" data-capfill-sec>
            </label>

</label>

          <label>
            <div class="small">Preview speed</div>
            <select data-speed>
              <option value="1">1×</option>
              <option value="2">2×</option>
              <option value="4" selected>4×</option>
              <option value="10">10×</option>
            </select>
          </label>

          <label>
            <div class="small">Beep volume</div>
            <input type="range" min="0" max="100" value="70" data-beep-volume>
          </label>
            <label>
              <div class="row" style="gap:10px;align-items:center">
                <input type="checkbox" data-countdown-beeps>
                <span class="small">Countdown beeps (3-2-1)</span>
              </div>
            </label>
            <label>
              <div class="row" style="gap:10px;align-items:center">
                <input type="checkbox" data-keep-awake>
                <span class="small">Keep screen awake</span>
              </div>
            </label>
            <label>
              <div class="row" style="gap:10px;align-items:center">
                <input type="checkbox" data-auto-pause-hidden>
                <span class="small">Auto-pause if backgrounded</span>
              </div>
            </label>

          <div class="btn-row" style="align-items:flex-end">
            <button class="btn" data-test-beep>Test beep</button>
            <button class="btn" data-apply-cap>Apply cap</button>
            <button class="btn" data-undo-cap style="display:none">Undo cap</button>
            <button class="btn primary" data-start>Start</button>
          </div>
        </div>

        <div class="small" style="margin-top:10px">
          Total time: <span class="badge" data-total-time>--:--</span>
          <span class="small" data-cap-status style="margin-left:8px"></span>
        </div>
      </div>
    </div>

    <div class="timer-run card" style="margin-top:16px">
      <div class="timer-run-grid">
        <div class="timer-video" data-video-wrap>
          <div class="timer-video-inner" data-video></div>
          <div class="timer-overlay" data-timer-overlay>
            <div class="timer-overlay-top">
              <span class="badge" data-seg-kind>—</span>
              <span class="badge" data-stage>Stage —</span>
            </div>
            <div class="timer-clock" data-clock>00:00</div>
            <div class="small" data-move>—</div>

            <div class="timer-controls">
              <button class="btn" data-pause>Pause</button>
              <button class="btn" data-skip>Skip</button>
              <button class="btn danger" data-reset>Reset</button>
            </div>

            <div class="small" style="margin-top:8px">
              Next: <span data-next>—</span>
            </div>
            <div class="timer-next-preview" data-next-preview style="display:none">
              <img alt="Next move" data-next-thumb>
              <div class="small" data-next-label>Next</div>
            </div>
          </div>
        </div>

        <div class="timer-sidebar">
          <div class="title">Timeline</div>
          <div class="small">Live segment list (first 18 segments shown)</div>
          <div class="timeline" data-timeline></div>

          
          <div class="equip-panel" data-equip-panel>
            <div class="title">Equipment</div>
            <div class="small">Set equipment per move + quantity. Stored locally for now (Supabase later).</div>
            <div class="small" style="margin-top:8px">Current move: <span class="badge" data-equip-move>—</span></div>
            <div class="equip-list" data-equip-current></div>
            <div class="btn-row" style="margin-top:10px">
              <button class="btn sm" data-equip-edit>Edit current</button>
              <button class="btn sm" data-equip-summary>Workout summary</button>
            </div>
            <div class="equip-list" style="margin-top:10px; display:none" data-equip-summary-list></div>
          </div>

<div class="banner" style="margin-top:12px">
            <strong>Mobile audio note</strong>
            iPhone/Android browsers require a tap to enable audio. Use Start or Test beep.
          </div>
        </div>
      </div>
    </div>
  </div>

  
  <div class="modal" id="equipModal" aria-hidden="true">
    <div class="modal-inner">
      <div class="modal-head">
        <div class="title" data-equip-modal-title>Equipment</div>
        <button class="modal-close" data-equip-modal-close>Close</button>
      </div>
      <div class="modal-body" data-equip-modal-body></div>
    </div>
  </div>

  <div class="footer">
    <div class="container">
      <div>NDYRA — build preview (CP28). Timer engine prototype added (beeps + volume + time cap).</div>
    </div>
  </div>

  <script>
    if('serviceWorker' in navigator){
      window.addEventListener('load', ()=> navigator.serviceWorker.register('/sw.js').catch(()=>{}));
    }
  </script>
  <script src="/assets/js/site.js" defer></script>
</body>
</html>
